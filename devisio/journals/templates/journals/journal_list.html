{% extends parent %}

{% load compress %}

{% block content %}
<div class="row">
  <div class="twelve columns">
    <div class="page-header">
      <h2>
        Journals
        <div class="inline">
          <a href="#list" class="tab-link">List</a>
          <a href="#map" class="tab-link">Map</a>
        </div>
      </h2>
    </div>
  </div>
</div>
<div class="row">
  <div class="twelve columns">
    <div class="tabs">
      <div class="tab active" data-tab="list">
        <ul>
          {% for journal in journal_list %}
          <li>{{journal.slug}}</li>
          {% endfor %}
        </ul>
      </div>
      <div class="tab" data-tab="map" id="map-canvas" style="width: 100%; height: 700px;">Map</div>
    </div>
  </div>
</div>
{% endblock %}

{% block js %}
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.13&key=AIzaSyAPF9Px1e0Tz5TOh-TdcUFtBFLG1CmDzIc&sensor=false"></script>
{% compress js %}
<script src="{{STATIC_URL}}coffeescripts/maps-api.coffee" type="text/coffeescript"></script>
{% endcompress %}
<script type="text/javascript">
  var journals = [
  {% for journal in journal_list %}  {'location': [{{journal.location}}], 'slug': '{{journal.slug}}'},
  {% endfor %}];

  $('#pjax-container').on('pjax:end', function() {
    initializeMaps();
  });

  google.maps.event.addDomListener(window, 'load', initializeMaps);
</script>
{% endblock %}
